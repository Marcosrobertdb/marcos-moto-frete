<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marcos Moto Frete</title>

<style>
    body {
        background: #0d0d0d;
        color: #fff;
        font-family: Arial, sans-serif;
        margin: 0;
    }
    header {
        padding: 16px;
        background: #111;
        border-bottom: 1px solid #222;
    }
    header a {
        color: #ffcc00;
        margin-right: 18px;
        text-decoration: none;
        font-size: 16px;
    }
    .container {
        width: 92%;
        max-width: 1100px;
        margin: auto;
    }
    h2, h3 {
        color: #ffcc00;
    }
    input {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border: none;
        border-radius: 8px;
        background: #1b1b1b;
        color: #fff;
    }
    button {
        width: 100%;
        padding: 14px;
        margin-top: 10px;
        background: #ffcc00;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
    }
    .form-card {
        background: #161616;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #222;
    }
    .wa-fixed {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: #ffcc00;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    footer {
        margin-top: 40px;
        padding: 30px 0;
        border-top: 1px solid #222;
        background: #0e0e0e;
    }
</style>
</head>

<body>

<header>
<div class="container">
    <a href="#servicos">Serviços</a>
    <a href="#pedido">Pedido</a>
    <a href="#contato">Contato</a>
</div>
</header>


<section id="pedido" class="container" style="padding: 30px 0;">
    <h2>Calcular Preço da Entrega</h2>

    <input id="origem" type="text" placeholder="Endereço de coleta">
    <input id="destino" type="text" placeholder="Endereço de entrega">

    <button id="btnCalcular">Calcular Preço</button>

    <h3 id="resultado"></h3>

    <button id="btnWhats" style="display:none;">Enviar pelo WhatsApp</button>
</section>


<section class="container" style="padding: 20px 0;">
    <h3>Área de atendimento</h3>
    <iframe src="https://maps.google.com/maps?q=Osasco,+SP&output=embed"
        width="100%" height="300" style="border:0;border-radius:10px;"></iframe>
</section>


<footer id="contato" class="container">
    <div>
        <strong style="color:#ffcc00;">Contato</strong><br>
        WhatsApp: <a href="https://wa.me/5511965283733" style="color:#ffcc00;">(11) 96528-3733</a>
    </div>
</footer>


<div class="wa-fixed">
    <a href="https://wa.me/5511965283733">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="30">
    </a>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

    const btnCalcular = document.getElementById("btnCalcular");
    const btnWhats = document.getElementById("btnWhats");
    let precoGlobal = 0;

    async function getCoords(endereco) {
        const url = "https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=1&q="
            + encodeURIComponent(endereco);

        const resposta = await fetch(url);
        const dados = await resposta.json();

        if (!dados || dados.length === 0) return null;

        return {
            lat: parseFloat(dados[0].lat),
            lon: parseFloat(dados[0].lon)
        };
    }

    function distanciaKm(lat1, lon1, lat2, lon2) {
        const R = 6371;
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;

        const a =
            Math.sin(dLat/2)**2 +
            Math.cos(lat1 * Math.PI/180) *
            Math.cos(lat2 * Math.PI/180) *
            Math.sin(dLon/2)**2;

        return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    }

    btnCalcular.addEventListener("click", async () => {

        const origem = document.getElementById("origem").value.trim();
        const destino = document.getElementById("destino").value.trim();

        if (!origem || !destino) {
            document.getElementById("resultado").innerText = "Preencha os dois endereços.";
            return;
        }

        const c1 = await getCoords(origem);
        const c2 = await getCoords(destino);

        if (!c1 || !c2) {
            document.getElementById("resultado").innerText = "Endereço não encontrado.";
            return;
        }

        const km = distanciaKm(c1.lat, c1.lon, c2.lat, c2.lon);
        precoGlobal = km * 2;

        document.getElementById("resultado").innerText =
            "Distância: " + km.toFixed(2) + " km — Preço: R$ " + precoGlobal.toFixed(2);

        btnWhats.style.display = "block";
    });

    btnWhats.addEventListener("click", () => {

        const origem = document.getElementById("origem").value.trim();
        const destino = document.getElementById("destino").value.trim();

        const msg =
            "*Pedido de Frete*" +
            "%0AOrigem: " + origem +
            "%0ADestino: " + destino +
            "%0APreço: R$ " + precoGlobal.toFixed(2);

        window.open("https://wa.me/5511965283733?text=" + msg);
    });

});
</script>

</body>
</html>
